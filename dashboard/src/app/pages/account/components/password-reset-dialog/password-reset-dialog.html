<div class="dialog">
  <h2 mat-dialog-title>Reset your password</h2>
  <mat-dialog-content class="dialog-content">
    <p>Enter your phone number and we'll send a reset link via WhatsApp/SMS.</p>
    <form class="reset-form" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline" class="field">
        <mat-label>Phone number</mat-label>
        <input
          matInput
          type="tel"
          [formControl]="phoneControl"
          placeholder="0XXXXXXXXX"
          aria-required="true"
        />
        @if (
          phoneControl.invalid && (phoneControl.dirty || phoneControl.touched)
        ) {
          <mat-error>
            @if (phoneControl.errors?.["required"]) {
              Phone number is required.
            }
            @if (phoneControl.errors?.["pattern"]) {
              Phone must start with 0 and be 10 digits.
            }
          </mat-error>
        }
      </mat-form-field>
      @if (statusMessage) {
        <p class="status" [class.error]="isError">{{ statusMessage }}</p>
      }
    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="close()">Cancel</button>
    <button
      mat-flat-button
      color="primary"
      type="button"
      [disabled]="phoneControl.invalid || isSubmitting()"
      (click)="onSubmit()"
    >
      {{ isSubmitting() ? "Sendingâ€¦" : "Send reset link" }}
    </button>
  </mat-dialog-actions>
</div>
